<!DOCTYPE html>
<html lang="en-us">
    
<head>
    <meta charset="UTF-8">
    <title>House Sorting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Font Awesome icons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../styles/quizstyle.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Beth+Ellen&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Homemade+Apple&display=swap" rel="stylesheet">
</head>

<body>

    <div class="row">
        <div class="col m12">
            <div class="card z-depth-3 quiz-card">
                <div class="card-content white-text">
                    <h1 class="center-align quiz-title">Find your best friend!</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        
        <form>
             <!-- <h3>Question 1</h3> -->
            <label for="q1" class="question">What is your favorite pizza topping?</label><br>
            <div id="q1">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group1" type="radio"/>
                        <span>Pepperoni</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group1" type="radio"/>
                        <span>Pineapple</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group1" type="radio"/>
                        <span>Cheese</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group1" type="radio"/>
                        <span>Green Peppers</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 2</h3> -->
            <label for="q2" class="question">Where in the world would you most like to travel?</label><br>
            <div id="q2">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group2" type="radio"/>
                        <span>Thailand</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group2" type="radio"/>
                        <span>Hawaii</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group2" type="radio"/>
                        <span>Paris</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group2" type="radio"/>
                        <span>New York City</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 3</h3> -->
            <label for="q3" class="question">What is your favorite type of music?</label><br>
            <div id="q3">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group3" type="radio"/>
                        <span>Rock and Roll</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group3" type="radio"/>
                        <span>Techno</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group3" type="radio"/>
                        <span>Jazz</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group3" type="radio"/>
                        <span>Hip Hop</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 4</h3> -->
            <label for="q4" class="question">What kind of movies do you like?</label><br>
            <div id="q4">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group4" type="radio"/>
                        <span>Documentaries</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group4" type="radio"/>
                        <span>Action/Adventure</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group4" type="radio"/>
                        <span>Romance</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group4" type="radio"/>
                        <span>Comedy</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 5</h3> -->
            <label for="q5" class="question">Which of these desserts do you prefer?</label><br>
            <div id="q5">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group5" type="radio"/>
                        <span>A slice of cake</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group5" type="radio"/>
                        <span>An ice cream cone</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group5" type="radio"/>
                        <span>A bowl of pudding</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group5" type="radio"/>
                        <span>Some frozen fruit</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 6</h3> -->
            <label for="q6" class="question">What is your favorite color?</label><br>
            <div id="q6">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group6" type="radio"/>
                        <span>Red</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group6" type="radio"/>
                        <span>Blue</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group6" type="radio"/>
                        <span>Green</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group6" type="radio"/>
                        <span>Yellow</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 7</h3> -->
            <label for="q7" class="question">Would you rather go to:</label><br>
            <div id="q7">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group7" type="radio"/>
                        <span>A concert</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group7" type="radio"/>
                        <span>A stand-up comedy show</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group7" type="radio"/>
                        <span>A national park</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group7" type="radio"/>
                        <span>Your private study</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 8</h3> -->
            <label for="q8" class="question">What drink are you most likely to order?</label><br>
            <div id="q8">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group8" type="radio"/>
                        <span>Water</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group8" type="radio"/>
                        <span>Beer</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group8" type="radio"/>
                        <span>Coffee</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group8" type="radio"/>
                        <span>Soda</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 9</h3> -->
            <label for="q9" class="question">How would your friends describe you?</label><br>
            <div id="q9">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group9" type="radio"/>
                        <span>A leader</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group9" type="radio"/>
                        <span>Loyal</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group9" type="radio"/>
                        <span>Adventurous</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group9" type="radio"/>
                        <span>Comical</span>
                    </label>
                </p>
            </div>
            <!-- <h3>Question 10</h3> -->
            <label for="q10" class="question">What is your favorite season?</label><br>
            <div id="q10">
                <p>
                    <label>
                        <input value="1" class="with-gap" name="group10" type="radio"/>
                        <span>Fall</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="2" class="with-gap" name="group10" type="radio"/>
                        <span>Winter</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="3" class="with-gap" name="group10" type="radio"/>
                        <span>Summer</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input value="4" class="with-gap" name="group10" type="radio"/>
                        <span>Spring</span>
                    </label>
                </p>
            </div>
            <br>
            <button class="btn waves-effect waves-light brown darken-2" id="submit" type="submit"> Submit</button>
        </form>
        <br>

        <!-- Form validation modal -->
        <div id="modal1" class="modal">
                <div class="modal-content">
                    <h4 class="center-align modalv">Hey there!</h4>
                    <br><br>
                    <p class="center-align modalv">Please answer all of the questions!</p>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-brown btn-flat modalv">Got it!</a>
                </div>
            </div>
            <!-- Match modal -->
            <div class="modal" id="modal-match">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modalm">Your best friend at Hogwarts is...</h4>
                    </div>
                    <div class="modal-body">
                        <p class="modalm"><span id="match-name"></span>!!</p>
                        <img class="responsive-img" id="match-photo" src="" alt="">
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="/quiz3" id="results-btn" class="modal-close waves-effect waves-brown btn-flat modalm">Next Quiz!</a>
                </div>
            </div>
        

    </div>


<script type="text/javascript">

// Retrieve user input
var playerID = sessionStorage.getItem("playerID");
console.log(playerID);

$("#submit").on("click", function(event) {
    var answerArr = [];
    var userAnswers = {};
    event.preventDefault();
    // Form validation
    function validateForm() {
        var isValid = true;

        userAnswers = {
          hello: ["hello"],
          options: [
            $("#q1 input:checked").val(),
            $("#q2 input:checked").val(),
            $("#q3 input:checked").val(),
            $("#q4 input:checked").val(),
            $("#q5 input:checked").val(),
            $("#q6 input:checked").val(),
            $("#q7 input:checked").val(),
            $("#q8 input:checked").val(),
            $("#q9 input:checked").val(),
            $("#q10 input:checked").val()
          ]
        };
        console.log("GOODBYE");
        console.log(userAnswers);
        
        userAnswers.options.map(i=>{
            if($(`#q${i} input:checked`)){
                answerArr.push(i)
            } 
            if (answerArr.includes(undefined)) {
                isValid = false;
            }
        })
        console.log(answerArr);
        console.log("Form validation finished");
        return isValid;
    }
    
    // If form validation returns as true, create an object to hold user's input
    if (validateForm()) {
        console.log("HELLO");
        console.log(userAnswers);

        // Post user input to /api/players
        $.ajax({
            method: "PUT",
            url: "/api/players/friends",
            data: {userAnswers, playerID}
        })
        .then(function(data){
            // Grab match here
            $("#match-name").text(data.friendName);
            $("#match-photo").attr("src", data.friendImage);
            // Show results modal
            $("#modal-match").modal({
                dismissible: false
            });
            $("#modal-match").modal("open");
            console.log("Front end hello!");
        })
    } 
    // If form validation returns as false, tell the user to fill out all of the questions
    else {
        $("#modal1").modal();
        $("#modal1").modal("open");
    }
});

// $("#results-btn").on("click", function() {
//     window.location.href = "/results/" + playerID
// });

// $("#q1 input").on("click", function() {
//     console.log($("#q1 input:checked").val());
// })

</script>

</body>

</html>